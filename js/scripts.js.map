{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["var contentSlider;\nvar url = parseUri(window.location.href);\n\n$(window).on('load', function(){\n    if (typeof(contentSlider) === 'object')\n        contentSlider.resize();\n\n    // подрубаем AOS анимации\n    AOS.init({\n        once: true,\n        offset: 200\n    });\n\n    //прячем прелодер\n    $('#preloader').fadeOut(300);\n\n    setTimeout(function () {\n        $('img.lazyload').trigger(\"appear\");\n    }, 1000);\n\n\n\n\n    var loginBlock = JSON.parse($('#login-block-info').html());\n\n    if (loginBlock) {\n        if (loginBlock.hasOwnProperty('AUTH')) {\n            $('.js_login-block--logout, .js_login-block--profile').removeClass('d-none');\n            $('.js_login-block--login').addClass('d-none');\n        }\n\n        if (loginBlock.hasOwnProperty('BASKET')) {\n            $('.js_login-block--basket-full').removeClass('d-none');\n            $('.js_login-block--basket-empty').addClass('d-none');\n        }\n    }\n\n});\n$(document).ready(function ($) {\n    // Включаем прелодер\n    \n    $('.js_to-top').click(function () {\n        $('html, body').animate({\n            scrollTop: 0\n        }, 1000);\n    });\n    \n    $('img.lazyload').show().lazyload({\n        threshold: 200,\n        effect : \"fadeIn\"\n    });\n    \n    setTimeout(function(){\n        $('img.lazyload').trigger('appear');\n    },5000);\n    \n    $('.fancyDefault').fancybox();\n    \n    $('body').on('click','a.js_anchor-scroll',function (e) {\n        var my_link = $(this);\n        var scroll_to = $(my_link.attr('href'));\n        $('html, body').animate({\n            scrollTop: scroll_to.offset().top\n        }, 1000);\n        e.preventDefault();\n        return false;\n    });\n    \n    $.datepicker.setDefaults($.datepicker.regional['ru']);\n    \n    $('body').on('keyup change', 'input.error, textarea.error', function() {\n       $(this).removeClass('error').prev('.group-item__error').remove();\n    });\n    \n    \n    // загрузка кастомизированной карты\n    if ($('#js_map-holder').length > 0) {\n        GM_main.init();\n    }\n    \n    if ($('body').find('.js_content-slider').length > 0) {\n        contentSlider = new ContentSlider($('.js_content-slider'));\n        contentSlider.init();\n    }\n    /* Табы */\n    var minHeightPaymentBox = 0;\n    $(\"#order-tabs\").tabs({\n        activate: function( event, ui ) {\n            $('.ui-tabs-tab').removeClass('ui-tabs-tab-prev ui-tabs-tab-next ui-tabs-tab-error');\n    \n            $('.ui-tabs-active').prevAll('.ui-tabs-tab').addClass('ui-tabs-tab-prev');\n            $('.ui-tabs-active').nextAll('.ui-tabs-tab').addClass('ui-tabs-tab-next');\n    \n            /* валидация всех табов */\n            $('.ui-tabs-tab-prev').each(function () {\n                var currentStep = $(this).attr('aria-controls');\n                selectorSteps(currentStep, 2);\n            });\n    \n    \n            if (ui.newTab.attr('aria-controls') == 'tabs-5') {\n                /* размер информационного блока оплаты */\n    \n                if ($(document).width() > 991) {\n                    var tmpHeight = 0,\n                        count = $('#tabs-5').find('.order-payment__hidden-info').length;\n    \n                    $('.js_order-payment-info').append('<div class=\"tmpDiv\"></div>');\n    \n                    $('.order-payment__hidden-info').each(function () {\n    \n                        $('.js_order-payment-info .tmpDiv').html($(this).html());\n                        tmpHeight = $('.js_order-payment-info .tmpDiv').innerHeight();\n    \n    \n                        if (tmpHeight > minHeightPaymentBox)\n                            minHeightPaymentBox = tmpHeight;\n    \n                        if (!--count) {\n                            $('.js_order-payment-info .tmpDiv').remove();\n                            // $('.js_order-payment-info').height(minHeightPaymentBox + 65);\n                            $('.js_order-payment-info').css('min-height', minHeightPaymentBox + 65);\n                        }\n                    });\n                }\n    \n            }\n        }\n    });\n    $(\".js__order-tabs-disable\").tabs( \"disable\" );\n    /* Табы */\n    \n    /* переключатель шагов вперед */\n    $('.js_order-next-step').click(function (e) {\n        e.preventDefault();\n        var currentStep = $(this).parents('.order-tab').attr('id');\n    \n        selectorSteps(currentStep);\n    \n    });\n    \n    function selectorSteps(currentStep, validatorType) {\n        validatorType = validatorType || 1;\n    \n        if (currentStep == 'tabs-1') {\n            if (validatorType == 1)\n                $(\"#order-tabs\").tabs(\"option\", \"active\", 1);\n            $('html, body').animate({\n                scrollTop: $(\"#order-form\").offset().top-50\n            }, 300);\n        } else if (currentStep == 'tabs-2') {\n            var data = {};\n            $('#tabs-2').find('input').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            validator(data, 2, validatorType);\n        } else if (currentStep == 'tabs-3') {\n            var data = {};\n            $('#tabs-3').find('input').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            $('#tabs-3').find('textarea').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            $('#tabs-3').find('select').each(function () {\n                data[$(this).attr('name')] = $(this).find('option:selected').val();\n            });\n    \n            validator(data, 3, validatorType);\n        } else if (currentStep == 'tabs-4') {\n            var data = {};\n            $('#tabs-4').find('input[type=\"text\"]').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            $('#tabs-4').find('input[type=\"hidden\"]').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            $('#tabs-4').find('input[type=\"checkbox\"]').each(function () {\n                data[$(this).attr('name')] = $(this).val();\n            });\n            $('#tabs-4').find('select').each(function () {\n                data[$(this).attr('name')] = $(this).find('option:selected').val();\n            });\n            validator(data, 4, validatorType);\n        }\n    }\n    \n    function validator(data, nextStep, validatorType) {\n        validatorType = validatorType || 1;\n    \n        $.ajax({\n            url: 'ajax.php',\n            type: 'POST',\n            dataType: 'json',\n            data: {data: data, action: 'validator'},\n        })\n            .done(function (data) {\n    \n                if (validatorType == 1) {\n                    if (data.result.status === true) {\n                        $(\"#order-tabs\").tabs(\"option\", \"active\", nextStep);\n                    } else {\n                        var msg;\n                        for (key in data.result.errors) {\n                            if (!$('[name=\"'+key+'\"]').hasClass('error'))\n                                $('[name=\"'+key+'\"]').addClass('error').before('<span class=\"group-item__error\">'+ data.result.errors[key] +'</span>');\n                        }\n    \n                        if (data.result.hasOwnProperty('popup')) {\n                            showModalMessage(data.result.popup);\n                        }\n    \n                        if (data.result.hasOwnProperty('user')) {\n                            if ($('body').find('#popupLogIn').length > 0) {\n                                $('body').find('#popupLogIn').remove();\n                            }\n                            $('body').append(data.result.user.html);\n                            $('#popupLogIn').modal(\"show\");\n                        }\n                    }\n                    $('html, body').animate({\n                        scrollTop: $(\"#order-form\").offset().top-50\n                    }, 300);\n    \n                } else {\n                    if (data.result.status === false) {\n                        $(\"#order-tabs .order-tabs-list li:eq(\"+ (nextStep - 1) +\")\").addClass('ui-tabs-tab-error');\n                    }\n                }\n            })\n            .fail(function () {\n    \n            });\n    }\n    \n    /* переключатель шагов вперед */\n    \n    /* переключатель шагов назад */\n    $('.js_order-prev-step').click(function (e) {\n        e.preventDefault();\n        var currentStep = $(this).parents('.order-tab').attr('id'),\n            prevStep = $('.ui-tabs-tab[aria-controls=\"'+currentStep+'\"]').index() - 1;\n    \n        $(\"#order-tabs\").tabs(\"option\", \"active\", prevStep);\n    \n        $('html, body').animate({\n            scrollTop: $(\"#order-form\").offset().top-50\n        }, 300);\n    });\n    /* переключатель шагов назад */\n    \n    \n    /* календарик */\n    if ($( document ).width() < 576) {\n        $('.js_datepicker').datepicker({\n            numberOfMonths: [1, 1],\n            minDate: 1\n        });\n    } else {\n        $('.js_datepicker').datepicker({\n            numberOfMonths: 2,\n            minDate: 1\n        });\n    }\n    /* календарик */\n    \n    /* время звоков и смс */\n    $('.js_order-radio-button input').change(function () {\n        var day = $(this).val(),\n            timeStart = $(this).parents('.js_order-sender-time-holder').find('.js_order-spinner input:eq(0)').val(),\n            timeEnd = $(this).parents('.js_order-sender-time-holder').find('.js_order-spinner input:eq(1)').val(),\n            input = $(this).parents('.js_order-sender-time-holder').find('input[type=\"hidden\"]');\n    \n        if (timeStart > timeEnd)\n            timeStart = timeEnd;\n    \n        input.val(day + ', c ' + timeStart + ' до ' + timeEnd);\n    });\n    \n    $('.js_order-sender-time-holder .js_order-spinner input').change(senderTimeChange);\n    $('.js_order-sender-time-holder .js_order-spinner input').on( \"spinchange\", senderTimeChange);\n    \n    function senderTimeChange() {\n        var day = $(this).parents('.js_order-sender-time-holder').find(\"input[type='radio']:checked\").val(),\n            timeStart = $(this).parents('.js_order-sender-time-holder').find('.js_order-spinner input:eq(0)').val(),\n            timeEnd = $(this).parents('.js_order-sender-time-holder').find('.js_order-spinner input:eq(1)').val(),\n            input = $(this).parents('.js_order-sender-time-holder').find('input[type=\"hidden\"]');\n    \n        if (timeStart > timeEnd)\n            timeStart = timeEnd;\n    \n        input.val(day + ', c ' + timeStart + ' до ' + timeEnd);\n    }\n    /* время звоков и смс */\n    \n    /* спинер (не тот, что в руках крутят) */\n    $('.js_order-spinner input').spinner({\n        min: 0,\n        max: 24,\n        spin: function(event, ui) {\n        },\n        change: function (event, ui) {\n    \n            var timeStart = $(this).parents('.js_order-spinner').find('input:eq(0)'),\n                timeStartVal = parseInt(timeStart.val()),\n                timeEnd = $(this).parents('.js_order-spinner').find('input:eq(1)'),\n                timeEndVal = parseInt(timeEnd.val());\n    \n            if (timeStartVal < 0)\n                timeStart.val(0);\n            else if (timeStartVal > 24)\n                timeStart.val(24);\n    \n            if (timeEndVal < 0)\n                timeEnd.val(0);\n            else if (timeEndVal > 24)\n                timeEnd.val(24);\n    \n            if (timeStartVal > timeEndVal)\n                timeStart.val(timeEnd.val());\n    \n        },\n        stop: function( event, ui ) {\n    \n        }\n    });\n    /* спинер (не тот, что в руках крутят) */\n    \n    \n    /* переключалки радиокнопок */\n    $('.js_order-collapse-radio').each(function () {\n        if (!$(this).find('input[type=\"radio\"]').is(':checked')) {\n            $(this).find('.js_order-collapse-radio-box').hide();\n        }\n    });\n    $('.js_order-collapse-radio input[type=\"radio\"]').change(function () {\n        if ($(this).is(':checked')) {\n            $('.js_order-collapse-radio').find('.js_order-collapse-radio-box').hide();\n            $(this).parents('.js_order-collapse-radio').find('.js_order-collapse-radio-box').show();\n        }\n    });\n    /* переключалки радиокнопок */\n    \n    /* время доставки */\n    $('.js_delivery-time').change(deliveryTimeChange);\n    $('.js_delivery-time').on( \"spinchange\", deliveryTimeChange);\n    \n    function deliveryTimeChange() {\n        var timeStart = parseInt($('.js_delivery-time:eq(0)').val()),\n            timeEnd = parseInt($('.js_delivery-time:eq(1)').val());\n    \n        if (timeStart > timeEnd)\n            timeStart = timeEnd;\n    \n        $('input[name=\"date-no-call-time\"]').val(timeStart + ' - ' + timeEnd);\n    }\n    /* время доставки */\n    \n    \n    \n    /* оформление заказа */\n    $('#order-form').submit(function (e) {\n        e.preventDefault();\n    \n        var data = $(this).serialize(),\n            url = $(this).attr('action'),\n            method = $(this).attr('method');\n    \n        $.ajax({\n            url: url,\n            method: method,\n            data: data,\n            dataType: \"json\"\n        })\n            .done(function (data) {\n    \n                if (data.status == true) {\n                    window.location = \"/lk/zakazy/payment.php?ORDER_ID=\"+data.order+\"&PAYMENT_ID=\"+data.payment;\n                    // alert('Новый заказ №' + data.order + ' оформлен');\n                } else if ((data.status == false) && (data.hasOwnProperty('user'))) {\n                    if (!$('body').find('#popupLogIn').length > 0) {\n                        $('body').append(data.user.html);\n                    }\n                    $('#popupLogIn').modal(\"show\");\n                } else {\n                    var msg;\n                    for (key in data.errors) {\n                        msg += key + \": \" + data.errors[key] + \"\\n\\r\";\n                    }\n                    alert(msg);\n                }\n            })\n            .fail(function () {\n            })\n            .always(function () {\n            });\n    });\n    \n    /* оформление заказа */\n    \n    \n    /* изменение количества в корзине */\n    var quantityChangeTimer;\n    $('.js_order-form-quantity span').click(function (e) {\n        e.preventDefault();\n        var input = $(this).siblings('input'),\n            value = parseInt(input.val()),\n            direction = $(this).text(),\n            productId = $(this).parents('.basket-item').data('item-id');\n    \n        if (direction === '+')\n            value++;\n        else if (direction === '-')\n            value--;\n    \n        if (value === 0)\n            value = 1;\n    \n        input.val(value);\n        quantityChange(productId);\n    });\n    \n    $('.js_order-form-quantity input').change(function (e) {\n        var productId = $(this).parents('.basket-item').data('item-id');\n    \n        if ((parseInt($(this).val()) < 1) || (isNaN($(this).val())) )\n            $(this).val(1);\n        quantityChange(productId);\n    });\n    \n    function quantityChange(productId) {\n        clearTimeout(quantityChangeTimer);\n        quantityChangeTimer = setTimeout(function () {\n            var value = $('#order-form').find('div[data-item-id=\"' + productId + '\"] input').val(),\n                priceBox = $('#order-form').find('div[data-item-id=\"' + productId + '\"] .js_price');\n            $.ajax({\n                url: \"ajax.php\",\n                method: \"POST\",\n                data: {productId: productId, value: value, 'action': 'quantity'},\n                dataType: \"json\"\n            })\n    \n                .done(function (data) {\n                    priceBox.html(data['ITEM_PRICE']);\n                    $('.js_total-price').html(data['FULL_PRICE']);\n                })\n                .fail(function () {\n                })\n                .always(function () {\n                });\n        }, 500);\n    }\n    /* изменение количества в корзине */\n    \n    \n    /* удаление товара */\n    $('.js_delete-product').click(function() {\n        var productRow = $(this).parents('.basket-item'),\n            productId = $(this).parents('.basket-item').data('item-id');\n        $.ajax({\n            url: \"ajax.php\",\n            method: \"POST\",\n            data: {productId: productId, 'action': 'delete'},\n            dataType: \"json\"\n        })\n    \n            .done(function (data) {\n                if (data['PRODUCT_COUNT'] === 0) {\n                    location.reload();\n                } else {\n                    productRow.remove();\n                    $('.js_total-price').html(data['FULL_PRICE']);\n                }\n            })\n            .fail(function () {\n            })\n            .always(function () {\n            });\n    });\n    /* удаление товара */\n    \n    /* поле для купона */\n    $('.js_cupon-field').click(function () {\n        $(this).parent().toggleClass('hidden').find('input').focus();\n    });\n    $('.js_cupon-field').change(function() {\n        $('.js_cupon-field').val($(this).val());\n    });\n    /* поле для купона */\n    \n    /* способы оплаты*/\n    $('.js_order-payment').change(function () {\n       var paymentInfo = $(this).siblings('.order-payment__hidden-info').html();\n       $('.js_order-payment-info .order-payment__info-holder').html(paymentInfo);\n    \n       /* костыль для safari */\n       setTimeout(function () {\n           if ($('.js_order-payment-info .order-payment__info-holder').height() > minHeightPaymentBox) {\n               minHeightPaymentBox = $('.js_order-payment-info .order-payment__info-holder').outerHeight();\n               $('.js_order-payment-info').css('min-height', minHeightPaymentBox + 65);\n           }\n       }, 1);\n    });\n    /* способы оплаты*/\n    \n    /* согласие */\n    $('#policy-input').change(function (e) {\n       if ($(this).prop(\"checked\")) {\n           $('#order-form-submit').prop('disabled', false).removeClass('disabled');\n       } else {\n           $('#order-form-submit').prop('disabled', true).addClass('disabled');\n       }\n    });\n    /* согласие */\n    \n    $('body').on('click', '.js_order-change-mail', function (e) {\n        e.preventDefault();\n        $('#message-modal').modal(\"hide\");\n        $('#popupLogIn').modal(\"hide\");\n        $('input[name=\"sender-email\"]').focus();\n    });\n    // напоминалки в личном кабинете\n    \n    $('.js_lk-reminder-delete').click(function() {\n        if (confirm(\"Точно удалить?\")) {\n            var reminderItem = $(this).parents('.js_lk-reminder-item'),\n                reminderId = reminderItem.data('event-id');\n            $.ajax({\n              url: 'ajax.php',\n              type: 'POST',\n              dataType: 'json',\n              data: {action: 'delete', reminderId: reminderId},\n            })\n            .done(function(data) {\n                if (data.status === true) {\n                    reminderItem.remove();\n                    alert(data.message);\n    \n                } else {\n                    alert(data.error);\n                }\n            })\n            .fail(function() {\n              console.log(\"error\");\n            })\n            .always(function() {\n              console.log(\"complete\");\n            });\n        }\n    });\n    \n    $('.js_datepicker-reminder').datepicker({\n        changeMonth: true,\n        changeYear: true,\n        minDate: 1\n    });\n    // профиль в личном кабинете\n    $('#lk-profile button[type=\"reset\"]').click(function (e) {\n        e.preventDefault();\n        window.location.href = '/lk/profil/';\n    });\n    \n    $('#lk-profile').submit(function (e) {\n       e.preventDefault();\n    \n       var formData = $(this).serialize();\n    \n       $.ajax({\n         url: 'ajax.php',\n         type: 'POST',\n         dataType: 'json',\n         data: formData,\n       })\n       .done(function(data) {\n         if (data.status === true)\n             alert(data.message);\n         else\n             alert(JSON.stringify(data.error));\n       })\n       .fail(function() {\n         console.log(\"error\");\n       })\n       .always(function() {\n         console.log(\"complete\");\n       });\n    });\n    $('.js_slider-landing .js_slider-list').slick({\n        dots: true,\n        dotsClass: 'slider-landing__dots',\n        customPaging : function(slider, i) {\n            return '<span class=\"slider-landing__dot-item\"></span>';\n        },\n        prevArrow: $('.js_slider-landing .js_to-left'),\n        nextArrow: $('.js_slider-landing .js_to-right'),\n        autoplay: true,\n        autoplaySpeed: 5000,\n        pauseOnHover: true,\n        pauseOnDotsHover: true,\n    });\n    $('body').on('click','.js_show-form-contacts',function () {\n        $('#modal-contacts').modal('show');\n    });\n    \n    $('body').on('submit', '.order-form form', function (e) {\n        e.preventDefault();\n        form_send('.order-form', 'json');\n        return false;\n    });\n    $('#custom-bouquet').submit(function (e) {\n        e.preventDefault();\n    \n    \n        var data = $(this).serialize();\n    \n        $.ajax({\n            url: 'ajax.php',\n            type: 'POST',\n            dataType: 'json',\n            data: data,\n        })\n            .done(function (data) {\n                if (data.status === true) {\n                    $('.js_message-form').html(data['message']);\n                    $('#custom-bouquet').slideUp();\n                } else {\n                    $('.js_message-form').html(data['error_message']);\n    \n                    udpdateCaptcha($('#custom-bouquet'));\n    \n                    $('html, body').animate({\n                        scrollTop: $('.js_message-form').offset().top\n                    }, 300);\n                }\n            })\n            .fail(function () {\n                console.log(\"error\");\n            })\n            .always(function () {\n                console.log(\"complete\");\n            });\n    \n    });\n    \n    $('.js_datepicker-custom-bouquet').datepicker({\n        changeMonth: true,\n        changeYear: true,\n        minDate: 1\n    });\n    if ( (url.queryKey.hasOwnProperty('set_filter')) || (url.queryKey.hasOwnProperty('del_filter')) ) {\n        $('html, body').animate({\n            scrollTop: $(\"#catalog\").offset().top\n        }, 0);\n    }\n    \n    if (!url.queryKey.hasOwnProperty('set_filter')) {\n        Cookies.set('filterValuesID', false);\n        $('.filter__values--active').removeClass('filter__values--active');\n    }\n    \n    $('.js__filter-title').click(function (e) {\n        e.preventDefault();\n        var id = $(this).data('filter-title'),\n            valuesBox = $('.js__filter-values').find('div[data-filter-values=\"' + id + '\"]');\n    \n        if ($(this).hasClass('filter__item-holder--active')) {\n            closeFilterTab(id);\n        } else {\n            $('.js__filter-title').each(function (e) {\n                let id = $(this).data('filter-title');\n                closeFilterTab(id);\n            });\n    \n            $('.filter__values--active').removeClass('filter__values--active');\n    \n            $(this).addClass('filter__item-holder--active');\n            valuesBox.addClass('filter__values--active');\n    \n            if ($(window).width() < 576) {\n                $('html, body').animate({\n                    scrollTop: $('.js__filter-values').offset().top\n                }, 300);\n            }\n    \n        }\n    \n        filterBottonDisplay();\n    });\n    \n    $('#del_filter').click(function () {\n        Cookies.set('filterValuesID', false);\n    });\n    \n    \n    var filterValuesID = Cookies.get('filterValuesID');\n    \n    if (filterValuesID !== undefined) {\n        $('.js__filter-title[data-filter-title=\"' + filterValuesID + '\"]').addClass('filter__item-holder--active');\n    \n    }\n    \n    $('.js__filter-values input').change(function (e) {\n        let id = $(this).parents('.filter__values').data('filter-values');\n    \n        filterTabSetSelected(id);\n    });\n    \n    $('.js__filter-values').on('click', '.disabled', function(e) {\n        e.preventDefault();\n    });\n    \n    \n    \n    function filterTabSetSelected(index) {\n        let titleBox = $('.js__filter-title[data-filter-title=\"' + index + '\"]');\n    \n        if ($('.js__filter-values .filter__values[data-filter-values=\"' + index + '\"] input:checked').length > 0) {\n            titleBox.addClass('filter__item-holder--selected');\n            Cookies.set('filterValuesID', index);\n        }\n    }\n    \n    \n    function filterBottonDisplay() {\n        if ($('.filter__item-list').find('.filter__item-holder--active').length > 0) {\n            $('.filter__buttons').addClass('filter__buttons--active');\n        } else {\n            $('.filter__buttons').removeClass('filter__buttons--active');\n        }\n    }\n    \n    function closeFilterTab(index) {\n        let titleBox = $('.js__filter-title[data-filter-title=\"' + index + '\"]');\n    \n        if ($('.js__filter-values .filter__values[data-filter-values=\"' + index + '\"] input:checked').length > 0) {\n            titleBox.addClass('filter__item-holder--selected');\n        } else {\n            titleBox.removeClass('filter__item-holder--selected');\n        }\n    \n        titleBox.removeClass('filter__item-holder--active');\n        $('.js__filter-values .filter__values[data-filter-values=\"' + index + '\"]').removeClass('filter__values--active');\n    }\n    advantageListSort();\n    $('.js_mobile-menu-trigger').click(function (e) {\n        e.preventDefault();\n        $('.js_slide-menu').slideToggle();\n    });\n    \n    $('.js_add-menu-parent').click(function (e) {\n        e.preventDefault();\n        $(this).next('.add-menu__sub-menu').slideToggle();\n    });\n    $('.js__catalog-detail-price-radio').change(function (e) {\n        let link = $(this).siblings('a').attr('href');\n        $('.js__catalog-detail-price-radio').parents('.catalog-detail__price-list__item').removeClass('active');\n        $(this).parents('.catalog-detail__price-list__item').addClass('active');\n        $('.js_catalog-detail-buy-button a').attr('href', link);\n    });\n    \n    /* выбор второго SKU на детальной странице каталога */\n    if ($('body').find('.catalog-detail__price-list__item').length > 2) {\n        $('.catalog-detail__price-list__item:eq(1) label').click();\n    } else if ($('body').find('.catalog-detail__price-list__item').length === 1) {\n        $('.catalog-detail__price-list__item:eq(0) label').click();\n    }\n    \n    $('.js_additional-catalog-list-item').click(function (e) {\n        e.preventDefault();\n        $('.js_additional-catalog-list-item').removeClass('active');\n        $(this).addClass('active');\n    });\n    $('.js_additional-catalog-list-item-link').click(function (e) {\n        e.stopPropagation();\n    });\n    \n    $('.catalog-detail__price-list').on('click', '.catalog-detail__price-list__item.active', function (e) {\n        e.preventDefault();\n        var id = $(this).find('input[name=\"order-product\"]').val();\n        metricsClick('buketToBasket', 'click', 'buketToBasket');\n        window.location.href = $(this).find('a').attr('href');\n    });\n    // Форма оставить отзыв\n    $('.js_btn-review').on('click', function () {\n        $('#popap-feedback').modal('show');\n    });\n    $('#popap-feedback .popap-close').on('click', function () {\n        $('#popap-feedback').modal('hide');\n    });\n    \n    $(document).on('submit', '#js_consult-form form', function (e) {\n        e.preventDefault();\n        form_send('#js_consult-form', 'json');\n        return false;\n    });\n    \n    // форма купить в один клик\n    $('.js_buy-one-click').on('click', function () {\n        var id = $(this).attr('data-id');\n        metricsClick('buyOneClick', 'click', 'buyOneClick');\n        $('#one-click-form').modal('show');\n        var buket = $(this).data('buket');\n        $('.js_one-click-buket').val(buket);\n        $('.js_one-click-link').val(location.href);\n    });\n    $('#one-click-form .popap-close').on('click', function () {\n        $('#one-click-form').modal('hide');\n    });\n    \n    $('body').on('submit', '#js_one-click-form form', function (e) {\n        e.preventDefault();\n        form_send('#js_one-click-form', 'json');\n        return false;\n    });\n    \n    // Форма в модалке с посадочной\n    $(document).on('click', '.js_open-landing-form', function (e) {\n        var serviceName = $(this).data('name'),\n            serviceLink = $(this).data('link');\n        $('#modal-landing-call').modal('show');\n        $('#service-name').val(serviceName);\n        $('#service-link').val(serviceLink);\n    });\n    \n    $('body').on('submit', '#js_landing-call-form form', function (e) {\n        e.preventDefault();\n        form_send('#js_landing-call-form', 'json');\n        return false;\n    });\n    \n    $('body').on('submit', '#js_landing-service-form form', function (e) {\n        e.preventDefault();\n        form_send('#js_landing-service-form', 'json');\n        return false;\n    });\n    \n    /**\n     *  Формы в разделе Обучение (мастер-классы)\n     */\n    $('.js_school-record').on('click', function (e) {\n        e.preventDefault();\n        var mkName = this.getAttribute('data-name');\n        var mkLink = this.getAttribute('data-link');\n        document.getElementById('mk-name').value = mkName;\n        document.getElementById('mk-link').value = mkLink;\n        $('#modal-school-order').modal('show');\n    });\n    $('.js_school-review').on('click', function (e) {\n        e.preventDefault();\n        var mkName = this.getAttribute('data-name');\n        var mkLink = this.getAttribute('data-link');\n        document.getElementById('mk-name-review').value = mkName;\n        document.getElementById('mk-link-review').value = mkLink;\n        $('#modal-school-review').modal('show');\n    });\n    $('#modal-school-review .popap-close').on('click', function () {\n        $('#modal-school-review').modal('hide');\n    });\n    $('#modal-school-order .popap-close').on('click', function () {\n        $('#modal-school-order').modal('hide');\n    });\n    \n    $('body').on('submit', '#modal-school-order form', function (e) {\n        e.preventDefault();\n        form_send('#modal-school-order', 'json');\n        return false;\n    });\n    \n    $('body').on('submit', '#modal-school-review form', function (e) {\n        e.preventDefault();\n        form_send('#modal-school-review', 'json');\n        return false;\n    });\n    /**\n     *  Формы в разделе Портфолио\n     */\n    $('.js_portfolio-call').on('click', function (e) {\n        e.preventDefault();\n        var pfName = this.getAttribute('data-name');\n        var pfLink = this.getAttribute('data-link');\n        document.getElementById('pf-name-call').value = pfName;\n        document.getElementById('pf-link-call').value = pfLink;\n        $('#modal-portfolio-call').modal('show');\n    });\n    $('#modal-portfolio-call .popap-close').on('click', function () {\n        $('#modal-portfolio-call').modal('hide');\n    });\n    \n    $('body').on('submit', '#modal-portfolio-call form', function (e) {\n        e.preventDefault();\n        form_send('#modal-portfolio-call', 'json');\n        return false;\n    });\n});\nvar getUrlParameter = function getUrlParameter(sParam) {\n    var sPageURL = decodeURIComponent(window.location.search.substring(1)),\n        sURLVariables = sPageURL.split('&'),\n        sParameterName,\n        i;\n\n    for (i = 0; i < sURLVariables.length; i++) {\n        sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === sParam) {\n            return sParameterName[1] === undefined ? true : sParameterName[1];\n        }\n    }\n};\n\n\nfunction dump(text, title) {\n    console.log('–––––––––––––––');\n    if (title) {\n        console.log(title + \":\");\n    }\n    if (text) {\n        console.log(text);\n    }\n    console.log('–––––––––––––––');\n}\n\nfunction randomInteger(min, max) {\n    var rand = min + Math.random() * (max + 1 - min);\n    rand = Math.floor(rand);\n    return rand;\n}\n\nfunction simple_ajax(url) {\n    var data = {\n        \"ID\": \"1\"\n    }\n    $.ajax({\n        url: url,\n        type: \"POST\",\n        dataType: \"HTML\",\n        data: data,\n    })\n        .done(function (data) {\n            console.log('запрос прошел');\n            console.log(data);\n        })\n        .fail(function () {\n            console.log('запрос не прошел');\n        }).always(function () {\n        console.log('simple_ajax сработал');\n    });\n}\n\n\n//  загрузка файла в битрикс, через input[type=file]\nfunction loadFile(event, callback) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    var files = event.target.files;\n    var data = new FormData();\n\n    $.each(files, function (key, value) {\n        data.append(key, value);\n    });\n\n    data_ret = $.ajax({\n        url: '/ajax/loadFile.php?files',\n        type: 'POST',\n        data: data,\n        cache: false,\n        async: false,\n        dataType: 'json',\n        processData: false,\n        contentType: false,\n    }).done(function (answer) {\n\n    }).fail(function (answer) {\n    }).always(function (answer) {\n        callback();\n    });\n\n    return jQuery.parseJSON(data_ret.responseText);\n}\n\n//отправка формы\n// form_selector - селектор блока\n// answer_type - ожидаемый тип ответа ( html, json )\n// предпологается что внутри этого блока есть:\n// .js_message-box - для вывода ответа\n// form  - форма данные из которой отправляются\n// все инпуты оформлены в .js_group-item и у них есть data-req и data-reqmess\n// есть action и method\nfunction form_send(form_selector, answer_type) {\n\n    var my_form_holder = $(form_selector);\n    var my_form = my_form_holder.find('form');\n    var result_block = my_form_holder.find('.js_message-box');\n\n    my_form.find('.js_group-item').removeClass('group-item--failed-input');\n    result_block.removeClass('fail');\n    var fine = 1;\n    var data = my_form.serialize();\n    let formReturn = false;\n\n    if (!answer_type) {\n        var answer_type = 'json';\n    } else {\n        var answer_type = answer_type;\n    }\n\n    if (!my_form.attr('method')) {\n        var method = 'POST';\n    } else {\n        var method = my_form.attr('method');\n    }\n\n    if (!my_form.attr('action')) {\n        var url = '/ajax/simple.php';\n    } else {\n        var url = my_form.attr('action');\n    }\n\n    result_block.html('');\n\n    my_form.find('.js_group-item').each(function () {\n        var my_item = $(this);\n        var my_input = $(this).find('input:not(\":file\"),textarea,select');\n        var req = my_item.data('req');\n        var reqmess = my_item.data('reqmess');\n        var textError = $(this).find('.js_text-error');\n\n        if (my_input.is(':checkbox')) {\n            if (parseInt(req) == 1 && !my_input.is(':checked')) {\n                my_item.addClass('group-item--failed-input');\n                textError.html(reqmess);\n                textError.show();\n                fine = 0;\n            }\n            else {\n                my_item.removeClass('group-item--failed-input');\n                textError.empty();\n                textError.hide();\n            }\n        } else if (my_input.is('select')) {\n            if (parseInt(req) == 1 && my_input.val() == null) {\n                my_item.addClass('group-item--failed-input');\n                textError.html(reqmess);\n                textError.show();\n                fine = 0;\n            }\n        } else if (my_input.val() == null && parseInt(req) == 1) {\n            my_item.addClass('group-item--failed-input');\n            textError.html(reqmess);\n            textError.show();\n            fine = 0;\n        }\n\n        else if (parseInt(req) == 1 && my_input.val() == '') {\n\n            my_item.addClass('group-item--failed-input');\n            textError.html(reqmess);\n            textError.show();\n            fine = 0;\n        }\n\n        my_input.on('keypress', (function () {\n            my_item.removeClass('group-item--failed-input');\n            textError.empty();\n            textError.hide();\n        }));\n\n        my_item.on('change', (function () {\n            textError.empty();\n            textError.hide();\n            my_item.removeClass('group-item--failed-input');\n        }));\n\n\n    });\n\n    if (fine) {\n        $.ajax({\n            url: url,\n            type: method,\n            dataType: answer_type,\n            data: data,\n        })\n            .done(function (answer) {\n                result_block.html('');\n                if (answer.status == 1) {\n                    result_block.html(answer.message);\n                    my_form[0].reset();\n                    my_form.slideUp();\n                    setTimeout(function () {\n                        $('#popap-feedback').modal('hide');\n\n                    }, 4000);\n                } else {\n                    result_block.html(answer.message);\n                }\n\n            })\n            .fail(function () {\n                console.log(\"error\");\n                result_block.html(\"Произошла ошибка при отправке, попробуйте позже\");\n\n                formReturn = false;\n\n                //функционал для обращения в конкретный инпут (по атрибуту name )\n                //\n                // var failed_input = 'name';\n                // var failed_text_new = 'Не верно е имя ( слишком короткое )';\n                // var failed_field = my_form_holder.find('[name=\"'+failed_input+'\"]').parent();\n                // дальше либо пишем в data-reqmess и выводим, либо сразу в поле ошибки\n\n            }).always(function () {\n            udpdateCaptcha(my_form_holder);\n        });\n\n\n    } else {\n        result_block.addClass('fail');\n        formReturn = false;\n    }\n    return formReturn;\n}\n\n// обновляем капчу у формы\nfunction udpdateCaptcha(selector) {\n    var my_form_holder = selector;\n    var data = {\n        \"ID\": \"1\"\n    }\n    var url = \"/ajax/ajax-update-captcha.php\";\n    $.ajax({\n        url: url,\n        type: \"POST\",\n        dataType: \"HTML\",\n        data: data,\n    })\n        .done(function (data) {\n            my_form_holder.find('.js_recaptcha-holder').html(data);\n            Recaptchafree.reset();\n        })\n        .fail(function () {\n            console.log('запрос не прошел');\n        }).always(function () {\n        console.log('simple_ajax сработал');\n    });\n\n\n}\n\n\n// кастомизированная карта гугла - https://habrahabr.ru/post/324880/\nvar GM_main = {\n    init: function () {\n        this.initCache();\n        this.initMap();\n    },\n    initCache: function () {\n        this.$body = $('body');\n        this.$popupContent = $('.marker1');\n    },\n    initMap: function () {\n\n        var coordinates = {lat: 59.940646, lng: 30.391026},\n            cordMarker1 = {lat: 59.940646, lng: 30.391026},\n            popupContent = this.$popupContent.html(),\n            zoom = 17,\n\n            map = new google.maps.Map(document.getElementById('js_map-holder'), {\n                center: coordinates,\n                zoom: zoom,\n                scrollwheel: false\n            }),\n\n            infowindow1 = new google.maps.InfoWindow({\n                content: \"Санкт-Петербург ул. Новгородская, д. 23 БЦ Базель, офис 314\"\n            }),\n\n            marker1 = new google.maps.Marker({\n                position: cordMarker1,\n                map: map,\n            });\n\n\n        marker1.addListener('click', function () {\n            infowindow1.open(map, marker1);\n        });\n\n\n    }\n};\n// полифилы для гугл карты\nfunction PointerEventsPolyfill(options) {\n    // set defaults\n    this.options = {\n        selector: '*',\n        mouseEvents: ['click', 'dblclick', 'mousedown', 'mouseup'],\n        usePolyfillIf: function () {\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var agent = navigator.userAgent;\n                if (agent.match(/MSIE ([0-9]{1,}[\\.0-9]{0,})/) != null) {\n                    var version = parseFloat(RegExp.$1);\n                    if (version < 11)\n                        return true;\n                }\n            }\n            return false;\n        }\n    };\n    if (options) {\n        var obj = this;\n        $.each(options, function (k, v) {\n            obj.options[k] = v;\n        });\n    }\n\n    if (this.options.usePolyfillIf())\n        this.register_mouse_events();\n}\n// singleton initializer\nPointerEventsPolyfill.initialize = function (options) {\n    if (PointerEventsPolyfill.singleton == null)\n        PointerEventsPolyfill.singleton = new PointerEventsPolyfill(options);\n    return PointerEventsPolyfill.singleton;\n};\n// handle mouse events w/ support for pointer-events: none\nPointerEventsPolyfill.prototype.register_mouse_events = function () {\n    // register on all elements (and all future elements) matching the selector\n    $(document).on(this.options.mouseEvents.join(\" \"), this.options.selector, function (e) {\n        if ($(this).css('pointer-events') == 'none') {\n            // peak at the element below\n            var origDisplayAttribute = $(this).css('display');\n            $(this).css('display', 'none');\n\n            var underneathElem = document.elementFromPoint(e.clientX, e.clientY);\n\n            if (origDisplayAttribute)\n                $(this)\n                    .css('display', origDisplayAttribute);\n            else\n                $(this).css('display', '');\n\n            // fire the mouse event on the element below\n            e.target = underneathElem;\n            $(underneathElem).trigger(e);\n\n            return false;\n        }\n        return true;\n    });\n};\n\n\nfunction showModalMessage(body, title) {\n    if (title === undefined) {\n        $('#message-modal .modal-header').hide();\n    } else {\n        $('#message-modal .modal-header').show().find('.modal-title').html(title);\n    }\n\n    if (body === undefined) {\n        $('#message-modal .modal-body').hide();\n    } else {\n        $('#message-modal .modal-body').show().html(body);\n    }\n\n    $('#message-modal').modal(\"show\");\n}\n\n\nfunction ContentSlider(container) {\n\n    this.container = container;\n\n    this.itemsCount = this.container.find('.content-slider__item').length;\n    this.nextPictureWidthMarig = 0;\n    this.prevPictureWidthMarig = 0;\n    this.halfWidthBox = 320;\n    this.visiblePartPicture = 54;\n    this.animationSpeed = 500;\n\n\n    var self = this;\n\n    this.init = function() {\n\n        self.setSize();\n\n        var containreHeight = 0,\n            itemHeight = 0;\n\n        self.container.find('.content-slider__item').each(function () {\n            itemHeight = $(this).height();\n            if (itemHeight > containreHeight) {\n                containreHeight = itemHeight;\n                container.css('min-height', containreHeight);\n            }\n        });\n\n        if (self.container.find('.active').length === 0) {\n            if (this.itemsCount > 3) {\n                self.container.find('.content-slider__item').eq(0).addClass('active');\n                self.container.prepend(self.container.find('.content-slider__item').eq(self.itemsCount - 1));\n                self.container.find('.active').prev().addClass('prev');\n                self.container.find('.active').next().addClass('next');\n            } else if (this.itemsCount == 3) {\n                self.container.find('.content-slider__item').eq(0).addClass('active');\n                self.container.prepend(self.container.find('.content-slider__item').eq(self.itemsCount - 1));\n                self.container.find('.active').prev().addClass('prev');\n                self.container.find('.active').next().addClass('next');\n            } else {\n                self.container.find('.content-slider__item').eq(0).addClass('active');\n                self.container.find('.active').prev().addClass('prev');\n                self.container.find('.active').next().addClass('next');\n            }\n        }\n\n        self.container.find('.active').css({\n            'left': '50%',\n            'margin-left': '-' + self.halfWidthBox + 'px'\n        });\n\n        self.prevPictureWidthMarig = -1 * (self.halfWidthBox + self.container.find('.prev').find('.content-slider__picture img').width() / 2 - self.visiblePartPicture);\n        self.container.find('.prev').css({\n            'left': '0%',\n            'margin-left': self.prevPictureWidthMarig\n        });\n\n        self.nextPictureWidthMarig = -1 * (self.halfWidthBox - self.container.find('.next').find('.content-slider__picture img').width() / 2 + self.visiblePartPicture);\n        self.container.find('.next').css({\n            'left': '100%',\n            'margin-left': self.nextPictureWidthMarig\n        });\n\n        self.container.on('click', '.next .content-slider__picture img', self.next);\n        self.container.on('click', '.prev .content-slider__picture img', self.prev);\n\n\n        self.swipeInit();\n\n    };\n\n    this.next = function(e) {\n        e.preventDefault();\n\n        if (self.container.hasClass('on-progress'))\n            return false;\n        self.container.addClass('on-progress');\n\n\n        var tmpWidth = 0; // workaround\n\n\n        if (self.itemsCount > 3) {\n            // проверяем, хватает ли элементов справа\n            if (self.container.find('.next').next().length === 0)\n                self.container.append(self.container.find('.content-slider__item').eq(0));\n            self.container.find('.prev').prev().css('left', '200%')\n        } else if (self.itemsCount == 3) {\n            // проверяем, хватает ли элементов справа\n            if (self.container.find('.next').next().length === 0) {\n                tmpWidth = self.container.find('.content-slider__item').eq(0).find('img').width();\n\n                self.container.find('.content-slider__item').eq(0)\n                    .addClass('remove')\n                    .clone()\n                    .removeClass('remove prev')\n                    .css({\n                        'left': \"200%\",\n                        'margin-left': 0\n                    }).appendTo( self.container );\n\n            }\n            self.container.find('.prev').prev().css('left', '200%');\n\n        } else {\n            if (self.container.find('.next').length === 0)\n                return false;\n        }\n\n\n        self.container.find('.prev').addClass('animated').css('left', '-100%');\n        self.container.find('.prev .content-slider__item-content').css('opacity', '0');\n\n        self.prevPictureWidthMarig = -1 * (self.halfWidthBox + self.container.find('.active .content-slider__picture img').width() / 2 - self.visiblePartPicture);\n\n        self.container.find('.active').addClass('animated').css({\n            'left': '0',\n            'margin-left': self.prevPictureWidthMarig\n        });\n        self.container.find('.active .content-slider__item-content').css('opacity', '0');\n\n\n        self.container.find('.next').addClass('animated').css({\n            'left': '50%',\n            'margin-left': '-' + self.halfWidthBox + 'px'\n        });\n        self.container.find('.next .content-slider__item-content').css('opacity', '1');\n\n\n\n        self.container.find('.next').next().css('left', '200%');\n\n        if (tmpWidth > 0)\n            self.nextPictureWidthMarig = -1 * (self.halfWidthBox - tmpWidth / 2 + self.visiblePartPicture);\n        else\n            self.nextPictureWidthMarig = -1 * (self.halfWidthBox - self.container.find('.next').next().find('.content-slider__picture img').width() / 2 + self.visiblePartPicture);\n\n\n        self.container.find('.next').next().addClass('animated').css({\n            'left': '100%',\n            'margin-left': self.nextPictureWidthMarig\n        });\n\n        setTimeout(function () {\n            self.container.find('.remove').remove();\n\n            self.setClass('prev');\n\n            self.swipeInit();\n\n        }, self.animationSpeed);\n\n\n    };\n\n    this.prev = function(e) {\n        e.preventDefault();\n\n\n        if (self.container.hasClass('on-progress'))\n            return false;\n        self.container.addClass('on-progress');\n\n        var tmpWidth = 0; // workaround\n\n\n        if (self.itemsCount > 3) {\n            // проверяем, хватает ли элементов слева\n            if (self.container.find('.prev').prev().length === 0)\n                self.container.prepend(self.container.find('.content-slider__item').eq(self.itemsCount - 1));\n            self.container.find('.prev').prev().css('left', '-100%');\n        } else if (self.itemsCount == 3) {\n\n            // проверяем, хватает ли элементов справа\n            if (self.container.find('.prev').prev().length === 0) {\n\n                tmpWidth = self.container.find('.content-slider__item').eq(self.itemsCount - 1).find('img').width();\n\n                self.container.find('.content-slider__item').eq(self.itemsCount - 1)\n                    .addClass('remove')\n                    .clone()\n                    .removeClass('remove prev next')\n                    .css({\n                        'left': '-100%',\n                        'margin-left': 0\n                    }).prependTo( self.container );\n\n            }\n\n        } else {\n            if (self.container.find('.prev').length === 0)\n                return false;\n        }\n\n\n        self.container.find('.next').addClass('animated').css('left', '200%');\n        self.container.find('.next .content-slider__item-content').css('opacity', '0');\n\n        self.nextPictureWidthMarig = -1 * (self.halfWidthBox - self.container.find('.active .content-slider__picture img').width() / 2 + self.visiblePartPicture);\n        self.container.find('.active').addClass('animated').css({\n            'left': '100%',\n            'margin-left': self.nextPictureWidthMarig\n        });\n        self.container.find('.active .content-slider__item-content').css('opacity', '0');\n\n\n        self.container.find('.prev').addClass('animated').css({\n            'left': '50%',\n            'margin-left': '-' + self.halfWidthBox + 'px'\n        });\n        self.container.find('.prev .content-slider__item-content').css('opacity', '1');\n\n        if (tmpWidth > 0) {\n            self.prevPictureWidthMarig = -1 * (self.halfWidthBox + tmpWidth / 2 - self.visiblePartPicture);\n        } else {\n            self.prevPictureWidthMarig = -1 * (self.halfWidthBox + self.container.find('.prev').prev().find('.content-slider__picture img').width() / 2 - self.visiblePartPicture);\n        }\n        self.container.find('.prev').prev().addClass('animated').css({\n            'left': '0%',\n            'margin-left': self.prevPictureWidthMarig\n        });\n\n        setTimeout(function () {\n            self.container.find('.remove').remove();\n\n            self.setClass('next');\n\n            self.swipeInit();\n\n        }, self.animationSpeed);\n\n    };\n\n    this.setSize = function() {\n        if ($( window ).width() < 576) {\n            self.visiblePartPicture = 15;\n            self.halfWidthBox = this.container.find('.content-slider__item').eq(1).width() * 0.5;\n        } else if ( ($( window ).width() >= 576) && ($( window ).width() < 768)) {\n            self.visiblePartPicture = 30;\n            self.halfWidthBox = this.container.find('.content-slider__item').eq(1).width() * 0.5;\n        } else if ($( window ).width() >= 768) {\n            self.visiblePartPicture = 30;\n            self.halfWidthBox = this.container.find('.content-slider__item').eq(1).width() * 0.5;\n        }\n    };\n\n    this.resize = function() {\n        self.container.off('click', '.next .content-slider__picture img');\n        self.container.off('click', '.prev .content-slider__picture img');\n\n        self.setSize();\n        self.init();\n    };\n\n    this.swipeInit = function() {\n        self.container.swipe( {\n            swipe:function(event, direction, distance, duration, fingerCount, fingerData) {\n                if (direction == 'left') {\n                    self.next(event);\n                } else if (direction == 'right') {\n                    self.prev(event);\n                }\n\n            }\n        });\n    };\n\n    this.setClass = function (direction) {\n        self.container.find('.content-slider__item').removeClass('animated next prev');\n\n        if (direction == 'next')\n            self.container.find('.active').removeClass('active').prev().addClass('active');\n        else if (direction == 'prev')\n            self.container.find('.active').removeClass('active').next().addClass('active');\n\n\n        self.container.find('.active').prev().addClass('prev');\n        self.container.find('.active').next().addClass('next');\n\n        self.container.removeClass('on-progress');\n    };\n}\n\nfunction advantageListSort() {\n    if ($('body').find('#advantages-add').length === 0)\n        return false;\n\n    if ( ($(window).width() >= 768) && ($(window).width() < 992) ) {\n        if ($('.js_advantage-part-2').find('.advantages-list__item-holder').length === 3) {\n            let box = $('.js_advantage-part-2 .advantages-list__item-holder').first();\n            $('.js_advantage-part-1').append(box);\n        }\n    } else {\n        if ($('.js_advantage-part-1').find('.advantages-list__item-holder').length === 3) {\n            let box = $('.js_advantage-part-1 .advantages-list__item-holder').last();\n            $('.js_advantage-part-2').prepend(box);\n        }\n    }\n}\n\n\nfunction metricsClick(ya_id, ga_type, ga_id) {\n    if(typeof(yaCounter48275270) != 'undefined') {\n        yaCounter48275270.reachGoal(ya_id);\n        ga('send', 'event', ga_type, ga_id);\n        return true;\n    }\n}\nvar scrollPos = 0;\n$(window).on('scroll', function(){\n    var st = $(this).scrollTop();\n    if (st > scrollPos){\n        $('.js_to-top ').removeClass('show');\n    } else {\n        if(st > 100){\n            $('.js_to-top ').addClass('show');\n        }\n    }\n    scrollPos = st;\n});\n$(window).on('resize', function(){\n    clearTimeout(window.resizedFinished);\n    window.resizedFinished = setTimeout(function () {\n        AOS.refresh();\n\n        if (typeof(contentSlider) === 'object')\n            contentSlider.resize();\n\n        advantageListSort();\n    }, 250);\n});\nvar tag = document.createElement('script');\n\ntag.src = \"https://www.youtube.com/iframe_api\";\ntag.async = \"true\";\nvar firstScriptTag = document.getElementsByTagName('script')[0];\nfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\nvar textualAddblockVideo;\nfunction onYouTubeIframeAPIReady() {\n    textualAddblockVideo = new YT.Player('textual-addblock__video-holder', {\n        height: '418',\n        width: '778',\n        videoId: 'wPoFo8Jcv-g',\n        events: {\n            'onReady': onPlayerReady\n        }\n    });\n\n    function onPlayerReady(){\n        $('.textual-addblock__video-holder .video-holder__btn').click(function(e){\n            $(this).parent('.video-holder__prev').fadeOut(1000);\n            textualAddblockVideo.playVideo();\n        });\n    }\n\n}"],"file":"scripts.js"}